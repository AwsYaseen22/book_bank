<!DOCTYPE html>
<html lang="en">

	<head>
		<%- include('../../partials/head'); %>
	</head>

	<body class="container">

		<header>
			<%- include('../../partials/header.ejs'); %>
		</header>

		<main>
			<div class="row">
				<div class="col-sm-12">
					<div class="jumbotron">
						<h1>The great books read by great people
						</h1>
						<% if (allBooks.length> 0) { %>
							<% allBooks.forEach(b=> { %>
								<div class="row">
									<div class="col-sm-6">
										<div class="card">
											<div class="card-body">
												<h5 class="card-title">
													<%= b.title %>
												</h5>
												<p class="card-text">
													<%= truncate(b.notes, 150) %>
												</p>
												<small>
													<%= formatDate(b.createdAt, 'DD MMMM, YYYY' ) %>
												</small>
												<div class="row">
													<div class="col-sm-2">
														<img src=<%=b.user.image %> alt="" class="small-image">
													</div>
													<div class="col-sm-10">
														<h6>
															Read by: <%= b.user.displayName %>
														</h6>
														<a href="/books/user/<%= b.user._id%>">
															<%= b.user.firstName%>'s read list...
														</a>
													</div>
												</div>

												<a href="/books/<%= b._id%>" class="btn btn-primary">More...</a>
											</div>
										</div>
									</div>
								</div>
								<% }) %>
									<% } else { %>
										<p>There are no public books to display!</p>
										<% } %>
					</div>
				</div>

			</div>
		</main>

		<footer>
			<%- include('../../partials/footer.ejs'); %>
		</footer>
	</body>

</html>